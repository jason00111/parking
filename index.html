<!DOCTYPE html>
<html>

<body>

    <h1>My First Google Map</h1>

    <div id="googleMap" style="width:100%;height:400px;"></div>
    <script src="meter.js"></script>
    <script src="meterData2.js"></script>

    <script>

      function myMap() {
        var mapProp = {
          // center:new google.maps.LatLng(2112625.9794610441, 6059698.9833894819),
          center: new google.maps.LatLng(37.78409100, -122.23709600),
          zoom: 12,
        };
        var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
        //
        var marker = new google.maps.Marker({
            position: {
              lat:  37.78409,
              lng: -122.2370
            },
            map: map,
            title: 'Hello World!'
        })

        const sampleData = meter.result.records.map(record => record.lonlatconc.split(', ').map(string => JSON.parse(string)) )

        const smallSetOfMeters = meters.slice(0)

        // console.log(smallSetOfMeters)



        //
        // sampleData.forEach( subarray => {
        //
        //   console.log('why is this -->', {
        //     lat:  subarray[1],
        //     lng: subarray[0]
        //   })
        //
        //   return new google.maps.Marker({
        //         position: {
        //           lat:  subarray[1],
        //           lng: subarray[0]
        //         },
        //         map: map,
        //         title: 'two'
        //     })
        //
        // }
        //
        // )


        new google.maps.Marker({
            position: {
              lat:  37.78419,
              lng: -122.2370
            },
            map: map,
            title: 'Hello World!'
        })


        smallSetOfMeters.forEach( meterObject => {

          let lng_something = +meterObject.lng
          let lat_something = +meterObject.lat


          let lat0 = 37.78429, lng0 = -122.2370

          new google.maps.Marker({
              icon: meterObject.notFound.length === 0 ? 'meterIcon.png' : 'meterNotFoundIcon.png',
              position: {
                lat:  lng_something,
                lng: lat_something
              },
              map: map,
              title: 'Hello World!'
          })

            // console.log('meterObject:', meterObject)

            // console.log('different than this -->', {
            //   lat: +meterObject.lng,
            //   lng: +meterObject.lat
            // })

            // return new google.maps.Marker({
            //     position: {
            //       lng:  +meterObject.lng,
            //       lat: +meterObject.lat
            //     },
            //     map: map,
            //     title: 'two'
            // })

          }

        )


        // smallSetOfMeters.forEach( meter_singular =>
        //   {
        //     console.log('latdfxb', meter_singular.lng, 'lng', meter_singular.lat, meter_singular.id)
        //     return new google.maps.Marker({
        //         position: {
        //           lat: parseInt(meter_singular.lng),
        //           lng: parseInt(meter_singular.lat)
        //         },
        //         map: map,
        //         title: meter_singular.id
        //     })
        //
        // })

      }
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?callback=myMap"></script>


    <style>

    </style>


</body>

</html>
