<!DOCTYPE html>
<html>

<body>

    <h1>My First Google Map</h1>

    <div id="googleMap" style="width:100%;height:400px;"></div>
    <script src="meter.js"></script>
    <script src="jquery.js"></script>

    <script>
        function myMap() {
            var mapProp = {
                // center:new google.maps.LatLng(2112625.9794610441, 6059698.9833894819),
                center: new google.maps.LatLng(37.78409100, -122.23709600),
                zoom: 20,
            };
            var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);

            var marker = new google.maps.Marker({
                position: {
                  lat:  37.78409100,
                  lng: -122.23709600
                },
                map: map,
                title: 'Hello World!'
            })

            var bigArray = meter.result.records.map(record => record.lonlatconc.split(', ').map(string => JSON.parse(string)) )


            // console.log('asdf', x)

            bigArray.forEach( subarray =>


              new google.maps.Marker({
                  position: {
                    lat:  subarray[1],
                    lng: subarray[0]
                  },
                  map: map,
                  title: 'two'
              })
            )
      }

      console.log($)
      //
      // $.ajax({
      //   method: 'GET',
      //   mode: 'cors',
      //   headers: '',
      //   url: 'http://data.openoakland.org/api/action/datastore/search.json?resource_id=abcb59e0-2d26-4180-a436-609a6044ef27',
      //   contentType: 'application/json',
      //   error: (err) => {
      //     console.error('update ajax failure', err)
      //   },
      //   datatype: 'application/json'
      // })
      // .then()  // NOTE: tell yasseen

      $.get('http://data.openoakland.org/api/action/datastore/search.json?resource_id=abcb59e0-2d26-4180-a436-609a6044ef27')
        .done(console.log)


    </script>

    <script src="https://maps.googleapis.com/maps/api/js?callback=myMap"></script>


    <style>

    </style>


</body>

</html>
